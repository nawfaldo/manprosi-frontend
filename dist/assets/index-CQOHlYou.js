import{k as u,u as m,b as x,j as e,A as i}from"./index-BOs4E3nY.js";import{u as v}from"./useQuery-BLzFuTEq.js";import{u as p}from"./useMutation-CP5VgZfq.js";async function h(t){const a=await fetch(`${i}/valves/${t}`,{credentials:"include"}),s=await a.json();if(!a.ok||!s.success)throw new Error(s.error);return s.data}async function b(t){const a=await fetch(`${i}/valves/${t}`,{method:"DELETE",credentials:"include"}),s=await a.json();if(!a.ok||!s.success)throw new Error(s.error);return s}function g(){const{landId:t,valveId:a}=u.useParams(),s=m(),d=x(),{data:r,isLoading:o,isError:l,error:c}=v({queryKey:["valve",a],queryFn:()=>h(a)}),n=p({mutationFn:b,onSuccess:()=>{d.invalidateQueries({queryKey:["land-valves",t]}),s({to:`/client/land/${t}`})}});return o?e.jsx("p",{className:"p-5",children:"Loading..."}):l?e.jsx("p",{className:"p-5 text-red-500",children:c.message}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between px-5 border-b border-gray-300",children:[e.jsxs("h1",{className:"py-3",children:["View Valve: ",r&&r.name]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>s({to:`/client/land/${t}/valve/${a}/update`}),className:"w-[80px] mt-1 h-[40px] border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50",children:"Update"}),e.jsx("button",{onClick:()=>{r&&confirm(`Delete ${r.name}?`)&&n.mutate(Number(r.id))},disabled:n.isPending,className:"w-[80px] mt-1 h-[40px] border border-red-200 text-red-600 rounded hover:bg-red-50 disabled:opacity-50",children:n.isPending?"...":"Delete"})]})]}),r&&e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-3",children:"Valve Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"font-semibold text-black",children:"Name:"})," ",r.name]}),e.jsxs("p",{children:[e.jsx("strong",{className:"font-semibold text-black",children:"Land ID:"})," ",r.land_id]})]})]})})]})}export{g as component};
