import{e as m,u as x,b as p,r as l,j as e,A as b}from"./index-BOs4E3nY.js";import{u as v}from"./useMutation-CP5VgZfq.js";async function h(a){const s=await fetch(`${b}/valves`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)}),t=await s.json();if(!s.ok||!t.success)throw new Error(t.error||"Failed");return t.data}function g(){const{landId:a}=m.useParams(),s=x(),t=p(),[n,c]=l.useState(""),[d,i]=l.useState(""),o=v({mutationFn:h,onSuccess:()=>{t.invalidateQueries({queryKey:["land-valves",a]}),s({to:`/client/land/${a}`})},onError:r=>i(r.message)}),u=r=>{if(r.preventDefault(),!n.trim()){i("Name required");return}o.mutate({name:n,land_id:Number(a)})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between px-5 border-b border-gray-300",children:[e.jsx("h1",{className:"py-3",children:"Add New Valve"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{type:"submit",form:"create-valve-form",disabled:o.isPending,className:"w-[80px] mt-1 h-[40px] border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50",children:o.isPending?"Adding...":"Save"}),e.jsx("button",{onClick:()=>s({to:`/client/land/${a}`}),className:"w-[80px] mt-1 h-[40px] border border-red-200 text-red-600 rounded hover:bg-red-50 transition-colors",children:"Cancel"})]})]}),e.jsx("div",{className:"p-5",children:e.jsxs("form",{id:"create-valve-form",onSubmit:u,className:"space-y-4 max-w-lg",children:[d&&e.jsx("p",{className:"text-red-500 text-sm",children:d}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Valve Name"}),e.jsx("input",{type:"text",value:n,onChange:r=>c(r.target.value),className:"border border-gray-300 rounded p-2 focus:outline-none focus:border-black",placeholder:"idk"})]})]})})]})}export{g as component};
