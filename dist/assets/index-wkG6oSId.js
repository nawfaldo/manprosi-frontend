import{r as p,u as j,b,a as f,j as e,A as c}from"./index-BOs4E3nY.js";import{u as N}from"./useQuery-BLzFuTEq.js";import{u as y}from"./useMutation-CP5VgZfq.js";import{E as g,P as v,T as w}from"./trash-D2V0urTB.js";async function E(t){const r=await fetch(`${c}/users/${t}/lands`,{credentials:"include"}),a=await r.json();if(!r.ok||!a.success)throw new Error(a.error||"Failed to fetch lands");return a.data}async function C(t){const r=await fetch(`${c}/lands/${t}`,{method:"DELETE",credentials:"include"}),a=await r.json();if(!r.ok||!a.success)throw new Error(a.error||"Failed to delete land");return a}function z(){const[t,r]=p.useState("lands"),a=j(),d=b(),n=f(s=>s.user),{data:l,isLoading:o,isError:h,error:u}=N({queryKey:["lands",n?.id],queryFn:()=>E(n.id),enabled:!!n?.id}),i=y({mutationFn:C,onSuccess:()=>{d.invalidateQueries({queryKey:["lands",n?.id]})},onError:s=>{alert(s.message)}}),m=[{id:"lands",label:"lands"}],x=()=>{switch(t){case"lands":return o?e.jsx("p",{children:"Loading lands..."}):h?e.jsx("p",{className:"text-red-500",children:u.message}):l&&l.length===0?e.jsx("p",{children:"You have no lands yet."}):e.jsx("div",{className:"mt-5",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left border border-gray-300",children:[e.jsx("th",{className:"p-2.5 font-normal",children:"Name"}),e.jsx("th",{className:"p-2.5 font-normal",children:"Size (Ha)"}),e.jsx("th",{className:"p-2.5 font-normal",children:"Actions"}),e.jsx("th",{className:"text-transparent",children:"placeholder"}),e.jsx("th",{className:"text-transparent",children:"placeholder"}),e.jsx("th",{className:"text-transparent",children:"placeholder"})]})}),e.jsx("tbody",{children:l.map(s=>e.jsxs("tr",{className:"border-b border-gray-300",children:[e.jsx("td",{className:"p-2.5",children:s.location_name}),e.jsx("td",{className:"p-2.5",children:s.size}),e.jsx("td",{className:"p-2.5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>a({to:`/client/land/${s.id}`}),className:"p-1 hover:[&_svg]:stroke-[2.5]",title:"View",children:e.jsx(g,{size:18})}),e.jsx("button",{onClick:()=>a({to:`/client/land/${s.id}/update`}),className:"p-1 hover:[&_svg]:stroke-[2.5]",title:"Edit",children:e.jsx(v,{size:18})}),e.jsx("button",{className:"p-1 text-red-500 hover:text-red-700",onClick:()=>{confirm(`Delete ${s.location_name}?`)&&i.mutate(s.id)},disabled:i.isPending,title:"Delete",children:e.jsx(w,{size:18})})]})})]},s.id))})]})});default:return null}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between px-5 border-b border-gray-300",children:[e.jsxs("div",{className:"flex space-x-5",children:[e.jsx("h1",{className:"py-3",children:"Client Dashboard"}),e.jsx("nav",{"aria-label":"Tabs",className:"flex",children:m.map(s=>e.jsx("button",{onClick:()=>r(s.id),className:`pb-3 pt-3 ${t===s.id?"border-b-2 border-black":"border-b-2 border-transparent"}`,children:s.label},s.id))})]}),e.jsx("button",{onClick:()=>a({to:"/client/land/create"}),className:"px-3 mt-1 h-[40px] border border-gray-300 rounded hover:bg-gray-100",children:"Create"})]}),e.jsx("div",{className:"px-5",children:x()})]})}export{z as component};
