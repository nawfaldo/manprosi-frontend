import{m as l,u as m,b as p,j as e,A as i}from"./index-BOs4E3nY.js";import{u as x}from"./useQuery-BLzFuTEq.js";import{u as h}from"./useMutation-CP5VgZfq.js";async function b(a){const r=await fetch(`${i}/pumps/${a}`,{credentials:"include"}),s=await r.json();if(!r.ok||!s.success)throw new Error(s.error);return s.data}async function y(a){const r=await fetch(`${i}/pumps/${a}`,{method:"DELETE",credentials:"include"}),s=await r.json();if(!r.ok||!s.success)throw new Error(s.error);return s}function N(){const{landId:a,pumpId:r}=l.useParams(),s=m(),o=p(),{data:t,isLoading:d,isError:c,error:u}=x({queryKey:["pump",r],queryFn:()=>b(r)}),n=h({mutationFn:y,onSuccess:()=>{o.invalidateQueries({queryKey:["land-pumps",a]}),s({to:`/client/land/${a}`})}});return d?e.jsx("p",{className:"p-5",children:"Loading..."}):c?e.jsx("p",{className:"p-5 text-red-500",children:u.message}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between px-5 border-b border-gray-300",children:[e.jsxs("h1",{className:"py-3",children:["View Pump: ",t&&t.name]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>s({to:`/client/land/${a}/pump/${r}/update`}),className:"w-[80px] mt-1 h-[40px] border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50",children:"Update"}),e.jsx("button",{onClick:()=>{t&&confirm(`Delete ${t.name}?`)&&n.mutate(Number(t.id))},disabled:n.isPending,className:"w-[80px] mt-1 h-[40px] border border-red-200 text-red-600 rounded hover:bg-red-50 disabled:opacity-50",children:n.isPending?"...":"Delete"})]})]}),t&&e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-3",children:"Pump Information"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("p",{children:[e.jsx("strong",{className:"font-semibold text-black",children:"Name:"})," ",t.name]})})]})})]})}export{N as component};
