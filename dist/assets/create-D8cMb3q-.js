import{u as p,a as b,r as d,j as e,A as h}from"./index-BOs4E3nY.js";import{u as f}from"./useMutation-CP5VgZfq.js";async function g(n){const a=await fetch(`${h}/lands`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)}),t=await a.json();if(!a.ok||!t.success)throw new Error(t.error||"Failed to create land");return t.data}function v(){const n=p(),a=b(s=>s.user),[t,u]=d.useState(""),[i,m]=d.useState(""),[r,l]=d.useState({}),c=f({mutationFn:g,onSuccess:()=>{n({to:"/client"})},onError:s=>{l({server:s.message})}}),x=s=>{s.preventDefault();const o={};if(t.trim()||(o.locationName="Location name is required"),(!i||Number(i)<=0)&&(o.size="Size must be greater than 0"),a?.id||(o.server="User session not found. Please relogin."),Object.keys(o).length>0){l(o);return}c.mutate({location_name:t,size:Number(i),user_id:a.id})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between px-5 border-b border-gray-300",children:[e.jsx("h1",{className:"py-3",children:"Create Land"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{type:"submit",form:"create-land-form",disabled:c.isPending,className:"w-[80px] mt-1 h-[40px] border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:c.isPending?"Saving...":"Save"}),e.jsx("button",{onClick:()=>n({to:"/client"}),className:"w-[80px] mt-1 h-[40px] border border-red-200 text-red-600 rounded hover:bg-red-50 transition-colors",children:"Cancel"})]})]}),e.jsx("div",{className:"p-5",children:e.jsxs("form",{id:"create-land-form",onSubmit:x,className:"space-y-4 max-w-lg",children:[r.server&&e.jsx("p",{className:"text-red-500 text-sm",children:r.server}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Location Name"}),e.jsx("input",{type:"text",value:t,onChange:s=>u(s.target.value),placeholder:"idk",className:"border border-gray-300 rounded p-2 focus:outline-none focus:border-black"}),r.locationName&&e.jsx("p",{className:"text-red-500 text-xs",children:r.locationName})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Size (Ha)"}),e.jsx("input",{type:"number",step:"0.1",value:i,onChange:s=>m(s.target.value),placeholder:"idk",className:"border border-gray-300 rounded p-2 focus:outline-none focus:border-black"}),r.size&&e.jsx("p",{className:"text-red-500 text-xs",children:r.size})]})]})})]})}export{v as component};
