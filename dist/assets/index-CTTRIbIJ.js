import{n as u,u as x,b as p,j as e,A as l}from"./index-BOs4E3nY.js";import{u as h}from"./useQuery-BLzFuTEq.js";import{u as b}from"./useMutation-CP5VgZfq.js";async function y(n){const s=await fetch(`${l}/plants/${n}`,{credentials:"include"}),a=await s.json();if(!s.ok||!a.success)throw new Error(a.error||"Failed to fetch plant");return a.data}async function g(n){const s=await fetch(`${l}/plants/${n}`,{method:"DELETE",credentials:"include"}),a=await s.json();if(!s.ok||!a.success)throw new Error(a.error||"Failed to delete");return a}function w(){const{landId:n,plantId:s}=u.useParams(),a=x(),i=p(),{data:t,isLoading:o,isError:d,error:c}=h({queryKey:["plant",s],queryFn:()=>y(s)}),r=b({mutationFn:g,onSuccess:()=>{i.invalidateQueries({queryKey:["land-plants",n]}),a({to:`/client/land/${n}`})},onError:m=>{alert(m.message)}});return o?e.jsx("p",{className:"p-5",children:"Loading plant details..."}):d?e.jsx("p",{className:"p-5 text-red-500",children:c.message}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between px-5 border-b border-gray-300",children:[e.jsxs("h1",{className:"py-3",children:["View Plant: ",t&&t.name]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>a({to:`/client/land/${n}/plant/${s}/update`}),className:"w-[80px] mt-1 h-[40px] border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Update"}),e.jsx("button",{onClick:()=>{t&&confirm(`Delete plant ${t.name}?`)&&r.mutate(Number(t.id))},disabled:r.isPending,className:"w-[80px] mt-1 h-[40px] border border-red-200 text-red-600 rounded hover:bg-red-50 transition-colors disabled:opacity-50",children:r.isPending?"...":"Delete"})]})]}),t&&e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-3",children:"Plant Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"font-semibold text-black",children:"Name:"})," ",t.name]}),e.jsxs("p",{children:[e.jsx("strong",{className:"font-semibold text-black",children:"Quantity:"})," ",t.quantity]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-2",children:"Planting Details"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-gray-900",children:t.planted_at?new Date(t.planted_at).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"-"}),e.jsxs("p",{className:"text-xs font-bold text-gray-400 mt-2",children:["Exact time: ",t.planted_at?new Date(t.planted_at).toLocaleTimeString():""]})]})]})]})]})}export{w as component};
