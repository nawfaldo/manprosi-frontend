import{g as m,u as p,b as x,r as c,j as e,A as b}from"./index-BOs4E3nY.js";import{u as h}from"./useMutation-CP5VgZfq.js";async function f(s){const t=await fetch(`${b}/pumps`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)}),r=await t.json();if(!t.ok||!r.success)throw new Error(r.error||"Failed");return r.data}function N(){const{landId:s}=m.useParams(),t=p(),r=x(),[n,l]=c.useState(""),[d,i]=c.useState(""),o=h({mutationFn:f,onSuccess:()=>{r.invalidateQueries({queryKey:["land-pumps",s]}),t({to:`/client/land/${s}`})},onError:a=>i(a.message)}),u=a=>{if(a.preventDefault(),!n.trim()){i("Name required");return}o.mutate({name:n,land_id:Number(s)})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between px-5 border-b border-gray-300",children:[e.jsx("h1",{className:"py-3",children:"Add New Pump"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{type:"submit",form:"create-pump-form",disabled:o.isPending,className:"w-[80px] mt-1 h-[40px] border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50",children:o.isPending?"Adding...":"Save"}),e.jsx("button",{onClick:()=>t({to:`/client/land/${s}`}),className:"w-[80px] mt-1 h-[40px] border border-red-200 text-red-600 rounded hover:bg-red-50 transition-colors",children:"Cancel"})]})]}),e.jsx("div",{className:"p-5",children:e.jsxs("form",{id:"create-pump-form",onSubmit:u,className:"space-y-4 max-w-lg",children:[d&&e.jsx("p",{className:"text-red-500 text-sm",children:d}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Pump Name"}),e.jsx("input",{type:"text",value:n,onChange:a=>l(a.target.value),className:"border border-gray-300 rounded p-2 focus:outline-none focus:border-black",placeholder:"idk"})]})]})})]})}export{N as component};
